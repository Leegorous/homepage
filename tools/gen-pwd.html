<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8" />
        <title>在线密码生产器 | Password Generator Online</title>
        
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="stylesheet" href="http://leegorous.net/css/bootstrap/2.0.3/css/bootstrap.min.css" />
        <link rel="stylesheet" href="http://leegorous.net/css/bootstrap/2.0.3/css/bootstrap-responsive.min.css" />

        <!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <style>
            body {
                background: #6ab3f6;
                padding: 35px 0;
            }

            .pwd-text {
                font-family: Monaco, Consolas, "DejaVu Sans Mono", "Courier New", Courier, monospace;
            }

            .container {
                background: #fff;
            }

            .headline {
                text-align: center;
                margin: 64px 0  32px 0;
            }

            .headline code {
                font-size: 20px;
            }

            .form-generator {
                text-align: center;
                padding: 0 0 30px 0;
            }

            .btn-huge {
                font-size: 80px;
                padding: 30px 70px;
                line-height: normal;
                -webkit-border-radius: 80px;
                -moz-border-radius: 80px;
                border-radius: 80px;
                outline: none;
            }

            .input-huge {
                width: 560px;
                font-size: 80px;
                line-height: normal;
                height: auto;
                padding: 15px;
                margin: 30px;
                text-align: center;
                -webkit-border-radius: 20px;
                -moz-border-radius: 20px;
                border-radius: 20px;
                outline: none;
            }

            .footer {
                text-align: center;
                padding: 35px 0 36px;
                border-top: 1px solid #E5E5E5;
            }
        </style>
    </head>
    
    <body>
        <header class="container">
            <div class="headline">
                <h1>在线密码生成器</h1>
                <p class="lead">Password Generator</p>
                <p class="lead pwd-text">密码规则：由 <code>a-z</code>, <code>A-Z</code>, <code>2-9</code>, <code>!@#$%^&amp;*+-=_</code> 组成；但不包含 <code>o, O, I, l</code>；8位随机
                </p>
                <p>完全不涉及，不收集任何个人信息，运算过程由 JavaScript 在浏览器内完成，可安全离线使用</p>
            </div>
        </header>

        <div class="container form-generator">
                <input class="btn btn-success btn-huge" id="gen-btn" type="button" value="产生新密码" /><br/>
                <input class="input-huge pwd-text" id="result" type="text"/>            
        </div>

        <footer class="container footer">
            <p>Build by <a href="http://weibo.com/leegorous">@leegorous</a>. This page licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
            <p><a href="http://leegorous.net/"><i class="icon-home"></i> leegorous.net</a></p>
        </footer>

        <script src="http://leegorous.net/track.js"></script>
    </body>
<script>
if (!Array.prototype.every) {
    Array.prototype.every = function(fun /*, thisp */) {
        "use strict";

        if (this == null) throw new TypeError();

        var t = Object(this);
        var len = t.length >>> 0;
        if (typeof fun != "function")
          throw new TypeError();

        var thisp = arguments[1];
        for (var i = 0; i < len; i++) {
          if (i in t && !fun.call(thisp, t[i], i, t))
            return false;
        }

        return true;
    };
}

(function() {
    var btn = document.getElementById('gen-btn'),
        result = document.getElementById('result'),
        tmpl = ["abcdefghijklmnopqrstuvwxyz", "ABCDEFGHIJKLMNOPQRSTUVWXYZ", "0123456789", "!@#$%^&*+-=_"],
        excludedChar = ['l', 'o', 'I', 'O', '0', '1'];

    var allChar = (function() {
        var s = tmpl.join('');
        excludedChar.forEach(function(it) {
            s = s.split(it).join('');
        });
        return s;
    })();

    function generate() {
        var pwd;
        function _gen() {
            var arr = [], len = allChar.length;
            for(var i = 0; i < 8; i++) {
                arr.push(allChar.charAt(Math.floor(Math.random() * len)));
            }
            return arr.join('');
        }

        function contain(str) {
            return function (target) {
                for (var i = target.length - 1; i>= 0; i--) {
                    if (str.indexOf(target.charAt(i)) != -1) return true;
                }
                return false;
            };
        }

        while (!tmpl.every(contain(pwd = _gen()))) {};
        return pwd;
    }

    btn.onclick = function() {
        result.value = generate();
        try {
            result.focus();
            result.select();
        } catch(e) {}
    }
})();
</script>
</html>